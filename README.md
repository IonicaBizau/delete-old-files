<!-- Please do not edit this file. Edit the `blah` field in the `package.json` instead. If in doubt, open an issue. -->


















# delete-old-files

 [![Support me on Patreon][badge_patreon]][patreon] [![Buy me a book][badge_amazon]][amazon] [![PayPal][badge_paypal_donate]][paypal-donations] [![Ask me anything](https://img.shields.io/badge/ask%20me-anything-1abc9c.svg)](https://github.com/IonicaBizau/ama) [![Version](https://img.shields.io/npm/v/delete-old-files.svg)](https://www.npmjs.com/package/delete-old-files) [![Downloads](https://img.shields.io/npm/dt/delete-old-files.svg)](https://www.npmjs.com/package/delete-old-files) [![Get help on Codementor](https://cdn.codementor.io/badges/get_help_github.svg)](https://www.codementor.io/@johnnyb?utm_source=github&utm_medium=button&utm_term=johnnyb&utm_campaign=github)

<a href="https://www.buymeacoffee.com/H96WwChMy" target="_blank"><img src="https://www.buymeacoffee.com/assets/img/custom_images/yellow_img.png" alt="Buy Me A Coffee"></a>







> Delete files that were last updated too long time ago.

















## :cloud: Installation

```sh
# Using npm
npm install --save delete-old-files

# Using yarn
yarn add delete-old-files
```













## :clipboard: Example



```js
const deleteOldFiles = require("delete-old-files");

const DIRECTORY_PATHS = [
    `${__dirname}/directory-to-keep-clean`
]

// Delete txt files older than 3 days
deleteOldFiles({
    directoryPaths: DIRECTORY_PATHS,
    age: 86400 * 3,       // 3 days
    checkInterval: 86400, // seconds (1 day)
    exclude: [
        ".gitignore",
        "keep.txt",
        "do-not-delete.txt",
        /\.md$/
    ],
    include: [
        /\.txt$/
    ],
    verbose: true,
    dryRun: true, // Set to true for testing
    onError: (err) => { console.error("Error occurred:", err); },
    onDelete: (filePath) => { console.log("Deleted file:", filePath); },
})
```











## :memo: Documentation


### `deleteOldFiles(options)`
Deletes the old files in the specified directories.

#### Params

- **Object** `options`: The options object containing:
    - `directoryPaths` (Array): An array of directory paths to scan for old files. Default is `[]`.
    - `age` (Number): The age in seconds that a file must be older than to be deleted. Default is `604800` (7 days).
    - `checkInterval` (Number): The interval in seconds to check for old files. Default is `86400` (1 day). Set to `0` to disable periodic checks.
    - `recursive` (Boolean): Whether to scan directories recursively. Default is `false`.
    - `exclude` (Array): An array of file names or regex patterns to exclude from deletion. Default is `[]`.
    - `include` (Array): An array of file names or regex patterns to include for deletion. If empty, all files are included unless excluded. Default is `[]`.
    - `verbose` (Boolean): Whether to log detailed information about the process. Default is `false`.
    - `dryRun` (Boolean): If `true`, files will not be deleted, but actions will be logged. Default is `false`.
    - `onError` (Function): A callback function that is called when an error occurs. Receives the error as an argument.
    - `onDelete` (Function): A callback function that is called when a file is deleted. Receives the file path as an argument.









## :question: Get Help

There are few ways to get help:



 1. Please [post questions on Stack Overflow](https://stackoverflow.com/questions/ask). You can open issues with questions, as long you add a link to your Stack Overflow question.
 2. For bug reports and feature requests, open issues. :bug:
 3. For direct and quick help, you can [use Codementor](https://www.codementor.io/johnnyb). :rocket:














## :yum: How to contribute
Have an idea? Found a bug? See [how to contribute][contributing].


## :sparkling_heart: Support my projects
I open-source almost everything I can, and I try to reply to everyone needing help using these projects. Obviously,
this takes time. You can integrate and use these projects in your applications *for free*! You can even change the source code and redistribute (even resell it).

However, if you get some profit from this or just want to encourage me to continue creating stuff, there are few ways you can do it:


 - Starring and sharing the projects you like :rocket:
 - [![Buy me a book][badge_amazon]][amazon]—I love books! I will remember you after years if you buy me one. :grin: :book:
 - [![PayPal][badge_paypal]][paypal-donations]—You can make one-time donations via PayPal. I'll probably buy a ~~coffee~~ tea. :tea:
 - [![Support me on Patreon][badge_patreon]][patreon]—Set up a recurring monthly donation and you will get interesting news about what I'm doing (things that I don't share with everyone).
 - **Bitcoin**—You can send me bitcoins at this address (or scanning the code below): `1P9BRsmazNQcuyTxEqveUsnf5CERdq35V6`

    ![](https://i.imgur.com/z6OQI95.png)


Thanks! :heart:
























## :scroll: License

[MIT][license] © [Ionică Bizău][website]






[license]: /LICENSE
[website]: https://ionicabizau.net
[contributing]: /CONTRIBUTING.md
[docs]: /DOCUMENTATION.md
[badge_patreon]: https://ionicabizau.github.io/badges/patreon.svg
[badge_amazon]: https://ionicabizau.github.io/badges/amazon.svg
[badge_paypal]: https://ionicabizau.github.io/badges/paypal.svg
[badge_paypal_donate]: https://ionicabizau.github.io/badges/paypal_donate.svg
[patreon]: https://www.patreon.com/ionicabizau
[amazon]: http://amzn.eu/hRo9sIZ
[paypal-donations]: https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=RVXDDLKKLQRJW
